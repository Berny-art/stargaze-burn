import { useEffect, useState } from 'react';

export default function Gauge({ percentage }) {
  const [currentPercentage, setCurrentPercentage] = useState(0);

  useEffect(() => {
    setCurrentPercentage(percentage);
  }, [percentage]);

  const handleEndRotation = currentPercentage * 56 - 28;


  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 1920 483"
    >
      <g className="gauge">
        <g className="clip">
          <mask
            id="a"
            width={1920}
            height={483}
            x={0}
            y={0}
            className="b"
            maskUnits="userSpaceOnUse"
            style={{
              maskType: "luminance",
            }}
          >
            <g className="clip-path">
              <path fill="#fff" d="M1920 0H0v483h1920V0Z" className="mask" />
            </g>
          </mask>
          <g className="mask" mask="url(#a)">
            <g className="meter-g">
              <path
                fill="#fff"
                d="M934.635 73.725c-1.71-.007-3.182-.428-4.415-1.263-1.226-.835-2.171-2.045-2.834-3.63-.656-1.583-.981-3.49-.974-5.717 0-2.22.328-4.113.984-5.677.663-1.565 1.608-2.754 2.834-3.57 1.233-.822 2.701-1.233 4.405-1.233 1.704 0 3.169.411 4.395 1.233 1.233.822 2.181 2.015 2.844 3.58.662 1.558.991 3.447.984 5.667 0 2.234-.331 4.143-.994 5.728-.657 1.584-1.598 2.794-2.824 3.629-1.227.835-2.695 1.253-4.405 1.253Zm0-3.57c1.167 0 2.098-.587 2.794-1.76.696-1.173 1.041-2.933 1.034-5.28 0-1.544-.159-2.83-.477-3.858-.312-1.027-.756-1.8-1.333-2.316a2.904 2.904 0 0 0-2.018-.776c-1.16 0-2.088.58-2.784 1.74-.696 1.16-1.047 2.897-1.054 5.21 0 1.565.156 2.87.467 3.918.318 1.04.766 1.823 1.343 2.347a2.938 2.938 0 0 0 2.028.775Zm12.988 3.38a2.323 2.323 0 0 1-1.69-.695 2.322 2.322 0 0 1-.696-1.69c0-.65.232-1.207.696-1.671a2.323 2.323 0 0 1 1.69-.696c.637 0 1.193.232 1.671.696.477.464.716 1.02.716 1.67 0 .438-.113.839-.338 1.204a2.576 2.576 0 0 1-.866.865 2.275 2.275 0 0 1-1.183.318Zm13.098.02c-1.405 0-2.658-.258-3.759-.775-1.093-.517-1.962-1.23-2.605-2.138-.643-.908-.978-1.948-1.004-3.122h4.176c.047.79.378 1.429.994 1.92.617.49 1.349.735 2.198.735.676 0 1.273-.15 1.79-.447a3.208 3.208 0 0 0 1.223-1.263c.298-.544.447-1.167.447-1.87 0-.715-.152-1.345-.457-1.889a3.24 3.24 0 0 0-1.243-1.272c-.53-.305-1.137-.461-1.82-.468-.596 0-1.176.123-1.74.368-.557.245-.991.58-1.302 1.004l-3.829-.686.965-10.738h12.449v3.52h-8.899l-.527 5.1h.119c.358-.503.898-.921 1.621-1.252.722-.332 1.531-.498 2.426-.498 1.226 0 2.32.289 3.281.866a6.232 6.232 0 0 1 2.277 2.376c.557 1 .832 2.154.825 3.46.007 1.372-.311 2.592-.954 3.66-.636 1.06-1.528 1.895-2.675 2.505-1.14.603-2.466.905-3.977.905Zm21.756-4.096v-1.074c0-.815.172-1.564.517-2.247.351-.69.858-1.24 1.521-1.65.669-.418 1.485-.627 2.446-.627.974 0 1.793.206 2.456.617a3.944 3.944 0 0 1 1.511 1.65c.345.683.517 1.435.517 2.257v1.074c0 .816-.172 1.568-.517 2.257a4.023 4.023 0 0 1-1.521 1.64c-.67.419-1.485.627-2.446.627-.974 0-1.793-.209-2.456-.626a4.039 4.039 0 0 1-1.511-1.64 4.972 4.972 0 0 1-.517-2.258Zm2.893-1.074v1.074c0 .47.113.915.338 1.332.232.418.65.627 1.253.627.603 0 1.014-.206 1.233-.617a2.75 2.75 0 0 0 .338-1.342v-1.074c0-.484-.106-.934-.318-1.352-.212-.418-.63-.626-1.253-.626-.597 0-1.011.208-1.243.626a2.74 2.74 0 0 0-.348 1.352Zm-13.344-10.58v-1.073c0-.822.176-1.574.527-2.257.352-.69.859-1.24 1.522-1.65.669-.412 1.478-.617 2.426-.617.981 0 1.803.205 2.466.616a4.036 4.036 0 0 1 1.511 1.65 4.94 4.94 0 0 1 .517 2.258v1.074c0 .822-.176 1.574-.527 2.257a4.03 4.03 0 0 1-1.521 1.64c-.663.405-1.478.607-2.446.607-.968 0-1.787-.206-2.456-.617a4.133 4.133 0 0 1-1.512-1.64 4.995 4.995 0 0 1-.507-2.247Zm2.914-1.073v1.074c0 .484.112.931.338 1.342.232.411.639.617 1.223.617.61 0 1.024-.206 1.243-.617a2.75 2.75 0 0 0 .338-1.342v-1.074a2.93 2.93 0 0 0-.319-1.352c-.212-.418-.633-.627-1.262-.627-.59 0-.998.212-1.223.637a2.814 2.814 0 0 0-.338 1.342Zm-1.601 16.545 14-20.363h2.605l-14 20.363h-2.605Z"
                className=".5%"
              />
              <g className="ellipse1">
                <path
                  fill="url(#b)"
                  d="M960.5 2367c602.82 0 1091.5-488.68 1091.5-1091.5C2052 672.681 1563.32 184 960.5 184 357.681 184-131 672.681-131 1275.5-131 1878.32 357.681 2367 960.5 2367Z"
                  className="Vector"
                />
                <path
                  stroke="#fff"
                  strokeWidth={3}
                  d="M960.5 2365.5c601.99 0 1090-488.01 1090-1090s-488.01-1090-1090-1090-1090 488.01-1090 1090 488.01 1090 1090 1090Z"
                  className="Vector"
                />
              </g>
              <g className="ellipse2">
                <path
                  stroke="#fff"
                  strokeWidth={3}
                  d="M960.5 2459.5c653.91 0 1184-530.09 1184-1184 0-653.905-530.09-1184-1184-1184-653.905 0-1184 530.095-1184 1184 0 653.91 530.095 1184 1184 1184Z"
                  className="Vector"
                />
              </g>
              <path
                stroke="#fff"
                strokeWidth={3}
                d="m342.5 265.5 38 61"
                className="Line 1"
              />
              <path
                stroke="#fff"
                strokeWidth={3}
                d="m635.891 136.5 17.609 64"
                className="Line 2"
              />
              <path
                stroke="#fff"
                strokeWidth={3}
                d="M960 90v61"
                className="Line 3"
              />
              <path
                stroke="#fff"
                strokeWidth={3}
                d="m1572.5 261.5-38 61"
                className="Line 4"
              />
              <path
                stroke="#fff"
                strokeWidth={3}
                d="m1277.11 134.5-17.61 64"
                className="Line 5"
              />
              <path
                stroke="#fff"
                strokeWidth={3}
                d="m472.5 197.5 14 30"
                className="Line 6"
              />
              <path
                stroke="#fff"
                strokeWidth={3}
                d="m799.5 101.5 5 30"
                className="Line 7"
              />
              <path
                stroke="#fff"
                strokeWidth={3}
                d="m1450.5 199.5-14 30"
                className="Line 8"
              />
              <path
                stroke="#fff"
                strokeWidth={3}
                d="m1123.5 103.5-5 30"
                className="Line 9"
              />
              <path
                fill="#fff"
                d="M318.783 255.007c-1.485.85-2.97 1.221-4.455 1.114-1.48-.11-2.903-.685-4.269-1.726-1.36-1.044-2.594-2.532-3.702-4.464-1.111-1.923-1.773-3.726-1.987-5.409-.208-1.686.015-3.189.67-4.508.656-1.329 1.723-2.419 3.198-3.271 1.475-.851 2.949-1.228 4.422-1.129 1.479.095 2.897.654 4.253 1.678 1.353 1.017 2.582 2.489 3.686 4.416 1.117 1.935 1.785 3.754 2.003 5.457.224 1.7.013 3.219-.631 4.555-.644 1.336-1.707 2.432-3.188 3.287Zm-1.785-3.091c1.01-.583 1.523-1.557 1.54-2.921.016-1.364-.566-3.061-1.745-5.09-.772-1.337-1.553-2.371-2.342-3.102-.784-.734-1.554-1.181-2.312-1.34a2.908 2.908 0 0 0-2.136.337c-1.005.58-1.518 1.547-1.541 2.899-.023 1.353.541 3.033 1.692 5.039.782 1.355 1.57 2.408 2.364 3.16.796.742 1.574 1.195 2.335 1.361a2.944 2.944 0 0 0 2.145-.343Zm19.085-11.822-.537-.93a4.912 4.912 0 0 1-.676-2.205 4.106 4.106 0 0 1 .492-2.19c.371-.696.973-1.285 1.805-1.766.844-.487 1.656-.718 2.436-.694a3.942 3.942 0 0 1 2.134.674c.64.419 1.165.984 1.576 1.696l.537.93a4.97 4.97 0 0 1 .681 2.213 4.027 4.027 0 0 1-.497 2.182c-.371.696-.973 1.285-1.806 1.765-.843.488-1.657.716-2.44.686a4.05 4.05 0 0 1-2.129-.665 4.983 4.983 0 0 1-1.576-1.696Zm1.969-2.377.537.93c.235.407.555.736.959.985.409.245.875.217 1.398-.084.522-.302.775-.685.759-1.151a2.742 2.742 0 0 0-.378-1.331l-.537-.93a2.944 2.944 0 0 0-.952-1.012c-.392-.256-.858-.228-1.398.084-.517.298-.771.686-.763 1.164.008.477.133.926.375 1.345Zm-16.846-2.49-.537-.93a4.861 4.861 0 0 1-.672-2.219 4.092 4.092 0 0 1 .492-2.19c.374-.69.972-1.273 1.793-1.747.85-.49 1.664-.723 2.444-.699a4.031 4.031 0 0 1 2.134.674c.64.419 1.165.984 1.576 1.696l.537.93c.411.712.635 1.451.672 2.218a4.027 4.027 0 0 1-.497 2.182c-.372.682-.977 1.264-1.815 1.748s-1.65.715-2.435.694a4.127 4.127 0 0 1-2.129-.665 4.996 4.996 0 0 1-1.563-1.692Zm1.986-2.387.537.93c.242.419.563.75.964.993.406.24.862.214 1.367-.077.528-.305.784-.69.768-1.156a2.742 2.742 0 0 0-.378-1.331l-.537-.93a2.944 2.944 0 0 0-.952-1.012c-.392-.256-.861-.226-1.406.089-.511.295-.758.682-.741 1.162.017.481.143.924.378 1.332Zm6.886 15.129 1.943-24.635 2.256-1.303-1.943 24.636-2.256 1.302Z"
                className="0%"
              />
              <path
                fill="#fff"
                d="m1576.28 214.557-10.18 17.635-3.73-2.152 8.14-14.097-.1-.059-5.5.2 1.91-3.307 5.96-.244 3.5 2.024Zm5.58 22.322.53-.93c.41-.706.93-1.269 1.57-1.688a4.133 4.133 0 0 1 2.15-.669c.79-.026 1.6.2 2.43.681.84.487 1.45 1.074 1.82 1.762.37.69.53 1.419.48 2.185-.04.764-.27 1.501-.68 2.213l-.54.93a5.007 5.007 0 0 1-1.57 1.696c-.64.419-1.36.639-2.14.661-.79.026-1.6-.2-2.43-.681-.85-.487-1.45-1.077-1.82-1.77a4.061 4.061 0 0 1-.49-2.177c.05-.769.28-1.507.69-2.213Zm3.04.517-.54.93c-.23.407-.36.848-.37 1.322-.01.478.25.868.77 1.169.52.302.98.329 1.38.083.4-.243.72-.574.96-.994l.54-.93c.24-.419.37-.862.4-1.33.02-.467-.24-.857-.77-1.169-.52-.298-.98-.324-1.39-.079-.41.246-.74.578-.98.998Zm-6.27-15.835.54-.93a4.9 4.9 0 0 1 1.58-1.691 4.123 4.123 0 0 1 2.15-.668c.78-.022 1.58.205 2.41.679.85.49 1.45 1.079 1.82 1.767.37.687.53 1.415.49 2.185a5.04 5.04 0 0 1-.68 2.213l-.54.93a4.825 4.825 0 0 1-1.59 1.691 4.01 4.01 0 0 1-2.13.66c-.78.019-1.59-.214-2.43-.697-.83-.484-1.44-1.072-1.81-1.762a4.084 4.084 0 0 1-.49-2.177c.05-.76.27-1.493.68-2.2Zm3.06.527-.54.93c-.24.419-.36.863-.37 1.332-.01.472.24.853.75 1.145.53.305.99.334 1.38.088.4-.244.72-.575.97-.994l.53-.93c.24-.419.38-.862.4-1.33.03-.468-.23-.859-.78-1.174-.51-.295-.97-.315-1.37-.06-.41.254-.73.586-.97.993Zm-9.66 13.529 22.31-10.636 2.26 1.303-22.31 10.635-2.26-1.302Z"
                className="1%"
              />
              <path
                fill="#DB2777"
                d="M998.003 1408.62 970.132 273.405l-9.476-164.734-6.582 165.014-8.238 1135.845 52.167-.91Z"
                className="handle" style={{
                  transform: `rotate(${handleEndRotation}deg)`,
                  transition: 'transform 3s ease-in-out',
                }}
              />
            </g>
          </g>
        </g>
      </g>
      <defs>
        <linearGradient
          id="b"
          x1={-307.823}
          x2={2104.39}
          y1={670.809}
          y2={284.418}
          className="c"
          gradientUnits="userSpaceOnUse"
        >
          <stop stopColor="#0064C1" />
          <stop offset={0.182} stopColor="#33CDD0" />
          <stop offset={0.335} stopColor="#89E39C" />
          <stop offset={0.478} stopColor="#C9DB5E" />
          <stop offset={0.616} stopColor="#E7BD26" />
          <stop offset={0.749} stopColor="#EE9437" />
          <stop offset={0.887} stopColor="#C65B90" />
          <stop offset={1} stopColor="#981734" />
        </linearGradient>
        <filter
          id="c"
          width={64.168}
          height={1312.86}
          x={939.836}
          y={105.672}
          className="d"
          colorInterpolationFilters="sRGB"
          filterUnits="userSpaceOnUse"
        >
          <feFlood floodOpacity={0} result="BackgroundImageFix" />
          <feColorMatrix
            in="SourceAlpha"
            result="hardAlpha"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
          />
          <feOffset dy={3} />
          <feGaussianBlur stdDeviation={3} />
          <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.161 0" />
          <feBlend
            in2="BackgroundImageFix"
            result="effect1_dropShadow_114_1803"
          />
          <feBlend
            in="SourceGraphic"
            in2="effect1_dropShadow_114_1803"
            result="shape"
          />
        </filter>
      </defs>
    </svg>
  );
}
